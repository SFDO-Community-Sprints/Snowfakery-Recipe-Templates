## NPSP Opportunities Example
### ------------- [          ORDER OF INSERT         ]------------ ###
# 1-0.  Organization Account: (3)                                                                                                                                    
# 2-0.  Contact: (4) NPSP will create Household                                                                                                                                       
# 3-0.  Campaign: (1)                                                                                                                                      
# 4-0.  Grant Opportunity (1)                                                                                                                              
# 5-0.  Donation Opportunity: (1-5)
# 6.0.  In-Kind Opportunity: (1)
# 7.0.  Membership Opportunity: (1) 
### ----------- [ Opportunity_npsp.recipe.yml Summary ]---------- ###
# This recipe creates 3 Organizations, 4 Contacts, a Campaign, A Grant, In-Kind, Membership and 1-5 Donation Opportunites.
# 
#
### ----------- [               CLI RUN                ]---------- ###
# Use this command to run this recipe in a Salesforce scratch org called "dev":
# cci task run snowfakery --recipe snowfakery_samples/npsp/Opportunity_npsp.recipe.yml --org dev
#
# Use this command to run this recipe locally and output to a JSON file called output.json
# snowfakery --output-format json --output-file snowfakery_samples/temp/output.json snowfakery_samples/npsp/Opportunity_npsp.recipe.yml
#
### ----------- [            Recipe Starts             ]---------- ###
#
# Look at snowfakery_samples/salesforce/Contact.recipe.yml for more examples.
# Creating an Organization Account
- object: Account
  nickname: Organization
  count: 3
  fields:
    Name:
      fake: Company
    RecordType: Organization
    Description: 
      fake: CatchPhrase
    BillingStreet: 
      fake: StreetAddress
    BillingCity:
      fake: City
    BillingState:
      fake: State
    BillingPostalCode:
      fake: PostalCode
    BillingCountry: United States # hardcoded to US here for simplicity
    Phone: 
      fake: PhoneNumber
    Website:
      fake: Uri
#
# Creating a Contact
- object: Contact
  nickname: Contact
  count: 4
  fields:
    FirstName:
      fake: FirstName
    LastName:
      fake: LastName
# If you're not familiar with NPSP, there is automation to populate the standard Email and Phone fields based on the data below.
# NPSP will also automatically create the Household Accounts
    npe01__HomeEmail__c:
      fake: Email
    npe01__WorkEmail__c:
      fake: Email
    npe01__Preferred_Email__c:
      random_choice:
        - Personal 
        - Work   
    npe01__WorkPhone__c:
      fake: PhoneNumber
    HomePhone:
      fake: PhoneNumber
    MobilePhone:
      fake: PhoneNumber
    npe01__PreferredPhone__c:
      random_choice:
        - Home 
        - Work
        - Mobile 
    MailingStreet:
      fake: StreetAddress
    MailingCity:
      fake: City
    MailingState:
      fake: State
    MailingPostalCode:
      fake: PostalCode
    MailingCountry: United States # hardcoded to US here for simplicity
    npe01__Primary_Address_Type__c: Home # hardcoded to home for simplicity
    Title:
      fake: Job
    Birthdate:
      date_between:
        start_date: -60y
        end_date: -20y
# Create a Campaign 
- object: Campaign
  nickname: Campaign
  just_once: True
  fields:
    name: Annual ${{fake.Word}} Appeal Campaign
    description: CatchPhrase
    StartDate:
      date_between:
        start_date: -1y
        end_date: -1m
    EndDate:
      date_between:
        start_date: 4m
        end_date: 6m
    Status: In Progress
    Type: Email
    ExpectedRevenue: 500000
    IsActive: True
#Create a Grant Opportunity
- object: Opportunity
  nickname: GrantOpportunity
  fields:
    RecordType: Grant
    AccountId: 
      reference: Organization 
    Name: Grant Opportunity #if the NPSP Naming Convention feature is activated, this name will be replaced
    Description: A Grant Opportunity
    CampaignId:
      reference: Campaign
    Amount:
      random_number:
        min: 5000
        max: 100000
    CloseDate:
      date_between:
        start_date: +1m
        end_date: +1y
    StageName: Prospecting
# Create 1-5 Donation Opportunities with Honoree Information
- object: Opportunity
  nickname: donation
  count:
    random_number:
      min: 1
      max: 5
  fields:
    RecordType: Donation
    npsp__Primary_Contact__c: 
      random_reference: Contact #snowfakery doesn't currently generate random reference on nickname, so this needs to be the object name    
    Name: ${{RecordType}} ${{CloseDate}}
    Description:
      fake.text:
        max_nb_chars: 100
    CampaignId:
      reference: Campaign
    CloseDate:
      date_between:
        start_date: -1y
        end_date: today
    StageName:
      random_choice:
        - Closed Won
        - Pledged
    Amount:
      random_number:
        min: 1
        max: 1000
    npsp__Acknowledgment_Date__c:
      date_between:
        start_date: -1y
        end_date: today
    npsp__Acknowledgment_Status__c:
      random_choice:
        - To Be Acknowledged
        - Acknowledged
        - Do Not Acknowledge
        - Email Acknowledgment Now
        - Email Acknowledgment Not Sent
    npsp__Honoree_Contact__c:
      reference: Contact
    npsp__Honoree_Name__c:
      fake: name
    npsp__Notification_Message__c:
      fake.text:
        max_nb_chars: 100
    npsp__Notification_Preference__c:
      random_choice:
        - Email
        - Postal Mail
        - Phone
        - Do Not Notify
    npsp__Notification_Recipient_Contact__c:
      reference: Contact
    npsp__Notification_Recipient_Information__c:
      fake.text:
        max_nb_chars: 100
    npsp__Notification_Recipient_Name__c:
      fake: name
    npsp__Primary_Contact__c:
      reference: Contact
    npsp__Tribute_Type__c: Honor
#
# #Create an In-Kind Opportunity
- object: Opportunity
  nickname: InKindOpp
  fields:
    RecordType: InKindGift
    npsp__Primary_Contact__c: 
      random_reference: Contact #snowfakery doesn't currently generate random reference on nickname, so this needs to be the object name    
    Name: ${{RecordType}} ${{CloseDate}}
    Description:
      fake.text:
        max_nb_chars: 100
    CampaignId:
      reference: Campaign
    CloseDate:
      date_between:
        start_date: -1y
        end_date: today
    StageName:
      random_choice:
        - Closed Won
        - Pledged
    Amount:
      random_number:
        min: 1
        max: 10000
    npsp__Acknowledgment_Date__c:
      date_between:
        start_date: -1y
        end_date: today
    npsp__Acknowledgment_Status__c:
      random_choice:
        - To Be Acknowledged
        - Acknowledged
        - Do Not Acknowledge
        - Email Acknowledgment Now
        - Email Acknowledgment Not Sent
    npsp__Ask_Date__c:
      date_between:
        start_date: -1y
        end_date: today
    npsp__Fair_Market_Value__c:
      random_number:
        min: 200
        max: 12000
    npsp__In_Kind_Description__c:
      fake.text:
        max_nb_chars: 100
    npsp__In_Kind_Type__c:
      random_choice:
        - Goods
        - Services
    npsp__Primary_Contact_Campaign_Member_Status__c:
      fake.text:
        max_nb_chars: 40
    npsp__Primary_Contact__c:
      reference: Contact
# #
# # Create a Membership Opportunity
- object: Opportunity
  nickname: memOpp
  fields:
    RecordType: Membership
    npsp__Primary_Contact__c: 
      random_reference: Contact #snowfakery doesn't currently generate random reference on nickname, so this needs to be the object name    
    Name: Membership ${{CloseDate}}
    Description:
      fake.text:
        max_nb_chars: 100
    CampaignId:
      reference: Campaign
    npsp__Primary_Contact_Campaign_Member_Status__c:
      fake.text:
        max_nb_chars: 40
    CloseDate:
      date_between:
        start_date: -1y
        end_date: today
    StageName: Closed Won
    Amount:
      random_number:
        min: 1
        max: 1000
    npe01__Member_Level__c:
      if:
        - choice:
            when: ${{Amount<100}}
            pick: Bronze
        - choice:
            when: ${{Amount<500}}
            pick: Silver
        - choice:
            pick: Gold
    npe01__Membership_End_Date__c:
      date_between:
        start_date: 3m
        end_date: 9m
    npe01__Membership_Origin__c:
      random_choice:
        - New
        - Renewal
        - Reacquire
    npe01__Membership_Start_Date__c:
      date_between:
        start_date: -1y
        end_date: -1m
    npsp__Acknowledgment_Date__c:
      date_between:
        start_date: -1y
        end_date: today
    npsp__Acknowledgment_Status__c:
      random_choice:
        - To Be Acknowledged
        - Acknowledged
        - Do Not Acknowledge
        - Email Acknowledgment Now
        - Email Acknowledgment Not Sent
#
# #Uncomment the following example and remove unneeded items to build out other opportunity types
# ##The example below shows options for advanced customization and random choice variables, plus less common NPSP fields 
#  - object: Opportunity
#   fields:
#     npsp__Primary_Contact__c: 
#       random_reference: Contact #snowfakery doesn't currently generate random reference on nickname, so this needs to be the object name    
#     Name:
#       fake: name
#     Description:
#       fake.text:
#         max_nb_chars: 100
#     CloseDate:
#       date_between:
#         start_date: -1y
#         end_date: today
#     StageName:
#       random_choice:
#         - Prospecting
#         - Qualification
#         - Closed Won
#         - Closed Lost
#         - Pledged
#     Amount:
#       random_number:
#         min: 1
#         max: 100000
#     npe01__Member_Level__c:
#       random_choice:
#         - Gold
#         - Silver
#         - Bronze
#     npe01__Membership_End_Date__c:
#       date_between:
#         start_date: -1y
#         end_date: today
#     npe01__Membership_Origin__c:
#       random_choice:
#         - New
#         - Renewal
#         - Reacquire
#     npe01__Membership_Start_Date__c:
#       date_between:
#         start_date: -1y
#         end_date: today
#     npsp__Acknowledgment_Date__c:
#       date_between:
#         start_date: -1y
#         end_date: today
#     npsp__Acknowledgment_Status__c:
#       random_choice:
#         - To Be Acknowledged
#         - Acknowledged
#         - Do Not Acknowledge
#         - Email Acknowledgment Now
#         - Email Acknowledgment Not Sent
#     npsp__Ask_Date__c:
#       date_between:
#         start_date: -1y
#         end_date: today
#     npsp__Closed_Lost_Reason__c:
#       fake.text:
#         max_nb_chars: 100
#     npsp__Fair_Market_Value__c:
#       random_number:
#         min: 1
#         max: 100000
#     npsp__Gift_Strategy__c:
#       random_choice:
#         - New Donor
#         - Renewal
#         - Upgrade
#     npsp__In_Kind_Description__c:
#       fake.text:
#         max_nb_chars: 100
#     npsp__In_Kind_Type__c:
#       random_choice:
#         - Goods
#         - Services
#     npsp__Matching_Gift_Account__c:
#       reference: Organization
#     npsp__Matching_Gift_Employer__c:
#       fake.text:
#         max_nb_chars: 100
#     npsp__Matching_Gift_Status__c:
#       random_choice:
#         - Potential
#         - Submitted
#         - Received
#     npsp__Primary_Contact_Campaign_Member_Status__c:
#       fake.text:
#         max_nb_chars: 40
#     npsp__Primary_Contact__c:
#       reference: Contact
#     npsp__Qualified_Date__c:
#       date_between:
#         start_date: -1y
#         end_date: today
#     npsp__Recurring_Donation_Installment_Number__c:
#       random_number:
#         min: 1
#         max: 100000
#     npsp__Requested_Amount__c:
#       random_number:
#         min: 1
#         max: 100000

